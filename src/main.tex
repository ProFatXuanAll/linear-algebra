% We use chapter structure.
\documentclass[12pt,oneside]{book}

%==============================================================================
% Preamble.
%==============================================================================

% Correctly showing characters outside ASCII.
\usepackage[T1]{fontenc}
% File is written and read with utf8 encoding.
\usepackage[utf8]{inputenc}
% Set paging layout.
\usepackage[margin=1.2in]{geometry}
% Including `amsfonts'.  Must be loaded before `mathtools'.
\usepackage{amssymb}
% Including `amsmath' and fixing bugs for `amsmath'.
\usepackage{mathtools}
% Must be loaded after `amsmath' and `mathtools'.
\usepackage{amsthm}
% Define page header and footer layout.
\usepackage{fancyhdr}
% LaTex 3 new command tools.
\usepackage{xparse}

% Use `fancyhdr' page style.  All page style settings must be called only after
% this command.  See `fancyhdr' for details.
\pagestyle{fancy}

% Make header height enough to fit chapter / section titles.
\setlength{\headheight}{15pt}
% Change chapter and section marks' formatting.  Note that I use `\markright'
% to make sure header use chapter information when section information is not
% available (this is need for appendix).
\renewcommand{\chaptermark}[1]{\markright{\textsf{\small Chap. \thechapter \quad #1}}}
\renewcommand{\sectionmark}[1]{\markright{\textsf{\small Sec. \thesection \quad #1}}}
% Cleanup page header settings.
\fancyhead{}
% Put page number on the left of page header.
\fancyhead[L]{\textbf{\textsf{\small \thepage}}}
% Put chapter / section information on the right of page header.
\fancyhead[R]{\rightmark}
% Cleanup page footer settings.
\fancyfoot{}

% Reset `plain' page style which is used for the first page of each chapter.
% I set this to make page number style consistent.
\fancypagestyle{plain}{%
  \fancyhf{}% clear all fields
  \fancyfoot[C]{\textbf{\textsf{\small \thepage}}}%
  \renewcommand{\headrulewidth}{0pt}%
}

% Automatically adjust character spacing at margins.
\usepackage{microtype}
% Provide further utilities and fix bugs for `enumerate', `itemize' and
% `description'.
\usepackage{enumitem}
% Provide better quoting environment.
\usepackage{dirtytalk}
% Parsing list inside `\newcommand'.
\usepackage{listofitems}
% Nice looking if-then-else structure with comparison functionality.
\usepackage{ifthen}
% Automatically add hyperlinks to labels/refs.  Must be loaded after all
% packages above and before `cleveref'.  Recommend to use with `natbib' when
% you need bibtex.
\usepackage{hyperref}

\hypersetup{       % This macro come with `hyperref'.
	colorlinks=true, % Color hyperlinks.
	linkcolor=blue,  % Color local hyperlinks with blue.
	urlcolor=cyan,   % Color url links with cyan.
}

% Must be loaded after `hyperref'.  We always capitalize each cross-references'
% type name.  See `cleveref' for details.
\usepackage[capitalize]{cleveref}

% Allow page break in the middle of multi-line equations.
\allowdisplaybreaks

%------------------------------------------------------------------------------
% Define environments.
%------------------------------------------------------------------------------

% Text inside the body of theorem-like environments are set to Roman font.
% theorem-like environments share their counters, counters follow section and
% reset in every sections (except for theorems, theorems counters are reset for
% each chapter).  Theorems and exercises has their owned counter.  Notes do not
% use counter.  See `amsthm' for details.
\theoremstyle{definition}
\newtheorem{ax}{Ax.}[section]
\newtheorem{cor}[ax]{Cor.}
\newtheorem{defn}[ax]{Def.}
\newtheorem{eg}[ax]{E.g.}
\newtheorem{ex}{Ex.}[section]
\newtheorem{lem}[ax]{Lem.}
\newtheorem{prop}[ax]{Prop.}
\newtheorem{thm}{Thm.}[chapter]
\newtheorem*{note}{Note}

% Define plural form for theorem-like environments.  This is needed when we
% call `cref' with multiple references.  See `cleveref' for details.
\crefname{ax}{Ax.}{Ax.}
\crefname{cor}{Cor.}{Cor.}
\crefname{defn}{Def.}{Def.}
\crefname{eg}{E.g.}{E.g.}
\crefname{ex}{Ex.}{Ex.}
\crefname{lem}{Lem.}{Lem.}
\crefname{note}{Note}{Note}
\crefname{prop}{Prop.}{Prop.}
\crefname{section}{Sec.}{Sec.}
\crefname{chapter}{Ch.}{Ch.}
\crefname{thm}{Thm.}{Thm.}

% Proof environments reference text.
\NewDocumentCommand{\pf}{m}{%
	Proof of \cref{#1}%
}
% Proof statements reference text.
\NewDocumentCommand{\byOptionalArgumentProcess}{m}{(#1)}
\NewDocumentCommand{\by}{m >{\SplitList{,}} o}{%
	\IfNoValueTF{#2}{%
		\text{(by \cref{#1})}%
	}{%
		\text{(by \cref{#1}\ProcessList{#2}{\byOptionalArgumentProcess})}%
	}%
}

% In `enumerate' enviroments, items' label are alphabets and surrounded by
% parentheses.  See `enumitem' for details.
\renewcommand{\labelenumi}{\textnormal{(}\alph{enumi}\textnormal{)}}

% Formatting equations tag appearence.  See `mathtools' for details.
\renewcommand{\theequation}{\thechapter.\thesection.\arabic{equation}}
\numberwithin{equation}{section}

%------------------------------------------------------------------------------
% Define operators and symbols.
%------------------------------------------------------------------------------

% Define common operators with paired of delimiters.  Always use star versions
% of these operator to automatically adjust height.  See `mathtools' for
% details.

% Absolute value.
\DeclarePairedDelimiter{\absTmp}{\lvert}{\rvert}
\NewDocumentCommand{\abs}{m}{\absTmp*{#1}}
% Ceiling.
\DeclarePairedDelimiter{\ceilTmp}{\lceil}{\rceil}
\NewDocumentCommand{\ceil}{m}{\ceilTmp*{#1}}
% Floor.
\DeclarePairedDelimiter{\floorTmp}{\lfloor}{\rfloor}
\NewDocumentCommand{\floor}{m}{\floorTmp*{#1}}
% Evaluate.
\DeclarePairedDelimiter{\evalTmp}{.}{\rvert}
\NewDocumentCommand{\eval}{m}{\evalTmp*{#1}}
% Inner product.
\DeclarePairedDelimiter{\innTmp}{\langle}{\rangle}
\NewDocumentCommand{\inn}{m}{\innTmp*{#1}}
% Norm.
\DeclarePairedDelimiter{\normTmp}{\lVert}{\rVert}
\NewDocumentCommand{\norm}{m}{\normTmp*{#1}}
% Parenthese.
\DeclarePairedDelimiter{\paTmp}{\lparen}{\rparen}
\NewDocumentCommand{\pa}{m}{\paTmp*{#1}}
% Bracket.
\DeclarePairedDelimiter{\brTmp}{\lbrack}{\rbrack}
\NewDocumentCommand{\br}{m}{\brTmp*{#1}}
% Brace.
\DeclarePairedDelimiter{\BTmp}{\lbrace}{\rbrace}
\NewDocumentCommand{\B}{m}{\BTmp*{#1}}
% Set.
\NewDocumentCommand{\set}{m}{\B{#1}}

% Define common symbols.  See `amsmath' section 9.2 for details.

% Fields.
\NewDocumentCommand{\field}{m}{\mathit{#1}}
% General field.
\NewDocumentCommand{\F}{}{\field{F}}
% Complex number field.
\NewDocumentCommand{\C}{}{\mathbb{C}}
% Natural number field.
\NewDocumentCommand{\N}{}{\mathbb{N}}
% Rational number field.
\NewDocumentCommand{\Q}{}{\mathbb{Q}}
% Real number field.
\NewDocumentCommand{\R}{}{\mathbb{R}}
% Integer number field.
\NewDocumentCommand{\Z}{}{\mathbb{Z}}

% Complex conjugate.
\NewDocumentCommand{\conj}{m}{\overline{#1}}

% Vector space.
\NewDocumentCommand{\vs}{m}{\mathsf{#1}}
% General vector space.
\NewDocumentCommand{\V}{}{\vs{V}}
\NewDocumentCommand{\W}{}{\vs{W}}
% Collection of vector space.
\NewDocumentCommand{\cvs}{}{\mathcal{C}}

% Metric space with shape #1 x #2 over field #3.
\NewDocumentCommand{\ms}{O{m}O{n}O{\F}}{\vs{M}_{{#1} \times {#2}}\pa{#3}}

% Function space.
\NewDocumentCommand{\fs}{}{\mathcal{F}}
% General function space.
\NewDocumentCommand{\FS}{}{\fs(S, \F)}

% Continuous function space with continuous #1-th derivative.
\NewDocumentCommand{\cfs}{o}{%
	\IfNoValueTF{#1}{%
		\vs{C}%
	}{%
		\vs{C}^{#1}%
	}%
}

% Polynomial spaces of degree #1 over field #2.
% #1 (optional) is the degree of polynomial.
% #2 is field.
%
% For example:
% If we use \(\ps{\F}\), we will get
%
%    \vs{P}(\F)
%
% If we use \(\ps[n]{\F}\), we will get
%
%    \vs{P}_{n}(\F)
%
\NewDocumentCommand{\ps}{om}{%
	\IfNoValueTF{#1}{%
		\vs{P}\pa{#2}%
	}{%
		\vs{P}_{#1}\pa{#2}%
	}%
}

% Derivative operation.
\NewDocumentCommand{\Dop}{}{\mathsf{D}}

% Sequence.
% #1 is a join operator (defaults to comma).
% #2 is a comma-separated list of sequence symbols.
% #3 is a comma-separated list of sequence index.
%
% For example:
% If we use \(\seq{a}{1,2,3}\), we will get
%
%    a_{1}, a_{2}, a_{3}
%
% If we use \(\seq[+]{a,b}{1,2,3}\), we will get
%
%    a_{1} b_{1} + a_{2} b_{2} + a_{3} b_{3}
%
% If we use \(\seq{a}{1}\), we will get
%
%    a_{1}
%
% If we use \(\seq{a}{1,,n}\), we will get
%
%    a_{1}, a_{2}, \dots, a_{n}
%
\NewDocumentCommand{\seq}{O{,} mm}{%
	\setsepchar{,}%                              List items are separated by comma.
	\readlist\SeqSymbols{#2}%                    Define macro `\SeqSymbols' using #1.
	\readlist\SeqIndices{#3}%                    Define macro `\SeqIndices' using #2.
	\foreachitem\SeqIndex\in\SeqIndices{%        Loop over indices.
		\ifthenelse{%                              Output join operator if `\SeqIndex' is not the first index.
			\equal{\SeqIndexcnt}{1}
		}{%
		}{%
			#1
		}%
		%--------------------------------------------------------------------------
		\ifthenelse{%                              Output dots if `\SeqIndex' is empty.
			\equal{\SeqIndex}{}%
		}%
		{%
			\ifthenelse{%                            If #1 is `,' use `\dots', otherwise use `\cdots'.
				\equal{#1}{,}%
			}%
			{\dots}%
			{\cdots}%
		}%
		{%
			\foreachitem\SeqSymbol\in\SeqSymbols{%   Loop over symbols.
				{\SeqSymbol}_{\SeqIndex}%              Output symbols with index.
			}%
		}%
	}%
}

% Tuple.
\NewDocumentCommand{\tuple}{mm}{\pa{\seq{#1}{#2}}}

% 0 vector.
\NewDocumentCommand{\zv}{}{\mathit{0}}
% 0 metric.
\NewDocumentCommand{\zm}{}{\mathit{O}}

% Transpose of matrix #1.
\NewDocumentCommand{\tp}{m}{{#1}^{t}}

% Trace of matrix #1.
\NewDocumentCommand{\tr}{o}{%
	\IfNoValueTF{#1}{%
		\operatorname{tr}%
	}{%
		\operatorname{tr}\pa{#1}%
	}%
}

% Span of a set.
% We cannot use `\span' since it is a tex primitive.
\NewDocumentCommand{\spn}{m}{\operatorname{span}\pa{#1}}

% Linear transformation.
\NewDocumentCommand{\lt}{m}{\mathsf{#1}}
% Linear transformation T.
\NewDocumentCommand{\T}{}{\lt{T}}
% Linear transformation U.
\NewDocumentCommand{\U}{}{\lt{U}}
% Identity transformation I.
\NewDocumentCommand{\IT}{o}{%
	\IfNoValueTF{#1}{%
		\lt{I}%
	}{%
		\lt{I}_{#1}%
	}%
}
% Zero transformation T_0.
\NewDocumentCommand{\zT}{}{\T_0}
% Left-multiplication transformation L_A.
\RenewDocumentCommand{\L}{}{\lt{L}}

% Null space N(T).
\NewDocumentCommand{\ns}{m}{\mathsf{N}\pa{#1}}

% Range R(T).
\NewDocumentCommand{\rg}{m}{\mathsf{R}\pa{#1}}

% Nullity nullity(T).
\NewDocumentCommand{\nt}{m}{\operatorname{nullity}\pa{#1}}

% Rank rank(T).
\NewDocumentCommand{\rk}{m}{\operatorname{rank}\pa{#1}}

% Vector spaces of linear transformations.
% For example:
% 	\ls(\V) or \ls(\V, \W)
\NewDocumentCommand{\ls}{}{\mathcal{L}}

% Formatting exercises section.
\NewDocumentCommand{\exercisesection}{}{
	\begin{center}
		\textbf{EXERCISES}
	\end{center}
}

%==============================================================================
% Document.
%==============================================================================

\begin{document}

%------------------------------------------------------------------------------
% Front matters.
%------------------------------------------------------------------------------

\frontmatter

% Author informations.
\title{Linear Algebra}
\author{ProFatXuanAll}
\maketitle

% Table of contents.
\tableofcontents

% Notations explanation.
\input{notations.tex}
\addcontentsline{toc}{chapter}{Notations}

%------------------------------------------------------------------------------
% Main matters.
%------------------------------------------------------------------------------

\mainmatter

% All chapters are in separated files.  We include them here.
\input{1-vector-spaces.tex}
\input{2-linear-transformations-and-matrices.tex}
\input{3-elementary-matrix-operations-and-systems-of-linear-equations.tex}
\input{4-determinants.tex}
\input{5-diagonalization.tex}
\input{6-inner-product-spaces.tex}
\input{7-canonical-forms.tex}

% Begin of appendix.
\appendix

% All appendices are in separated files.  We include them here.
\input{ap-a-sets.tex}
\input{ap-b-functions.tex}
\input{ap-c-fields.tex}
\input{ap-d-complex-numbers.tex}
\input{ap-e-polynomials.tex}

%------------------------------------------------------------------------------
% Back matters.
%------------------------------------------------------------------------------

\backmatter

\end{document}
